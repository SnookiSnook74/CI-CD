### Part 1. Настройка 

**== Задание ==**

##### Поднять виртуальную машину *Ubuntu Server 20.04 LTS*

![1_1](./images/1.1.png)

##### Скачать и установить на виртуальную машину **gitlab-runner**

![1_2](./images/1.2.png)

##### Запустить **gitlab-runner** и зарегистрировать его для использования в текущем проекте (*DO6_CICD*)

![1_3](./images/1.3.png)

## Part 2. Сборка

**== Задание ==**

#### Написать этап для **CI** по сборке приложений из проекта *C2_SimpleBashUtils*:
##### В файле _gitlab-ci.yml_ добавить этап запуска сборки через мейк файл из проекта _C2_

![2_1](./images/2.1.png)

##### Файлы, полученные после сборки (артефакты), сохранять в произвольную директорию со сроком хранения 30 дней.

![2_2](./images/2.2.png)

### Part 3. Тест кодстайла

**== Задание ==**

#### Написать этап для **CI**, который запускает скрипт кодстайла (*clang-format*):

![3_1](./images/3.1.png)

##### Если кодстайл не прошел, то "зафейлить" пайплайн

![3_2](./images/3.2.png)

##### В пайплайне отобразить вывод утилиты *clang-format*

![3_3](./images/3.3.png)

### Part 4. Интеграционные тесты


**== Задание ==**

#### Написать этап для **CI**, который запускает ваши интеграционные тесты из того же проекта:

![4_1](./images/4.1.png)

##### Запускать этот этап автоматически только при условии, если сборка и тест кодстайла прошли успешно. Если тесты не прошли, то "зафейлить" пайплайн

![4_2](./images/4.2.png)

##### В пайплайне отобразить вывод, что интеграционные тесты успешно прошли / провалились

![4_3](./images/4.3.png)

### Part 5. Этап деплоя

**== Задание ==**

#### Написать этап для **CD**, который "разворачивает" проект на другой виртуальной машине:

![5_1](./images/5.1.png)

##### Написать bash-скрипт, который при помощи **ssh** и **scp** копирует файлы, полученные после сборки (артефакты), в директорию */usr/local/bin* второй виртуальной машины

![5_2](./images/5.2.png)

- Для выполненения этого этапа нужно сначала скопировать ключ на вторую машину , чтобы можно было подключаться без ввода пароля

![5_3](./images/5_3.png)

- Cкопировать ключи из домашнего каталога в каталог пользователя гитлаб ранер, так как ранер с gitlab запускает все файлы используя пользователя gitlab-runner **sudo cp -r /home/emerosro/.ssh /home/gitlab-runner/**

- Изменить владельца и группу для каталога .ssh в домашнем каталоге gitlab-runner **sudo chown -R gitlab-runner:gitlab-runner /home/gitlab-runner/.ssh**


##### В случае ошибки "зафейлить" пайплайн

![5_4](./images/5.4.png)


### Part 6. Дополнительно. Уведомления

**== Задание ==**

##### Настроить уведомления о успешном/неуспешном выполнении пайплайна через бота с именем "[ваш nickname] DO6 CI/CD" в *Telegram*

![6_1](./images/6.1.png)

- Текст уведомления должен содержать информацию об успешности прохождения как этапа **CI**, так и этапа **CD**.

![6_2](./images/6.2.png)
